import{r as e,j as s,Y as a,a as t}from"./app-0nnjcZrn.js";import{H as n}from"./index-D7aLGra3.js";import{u as l}from"./use-toast-Dj50PcGS.js";import"./iconBase-x5fZwo94.js";const r=({address:r})=>{const[d,c]=e.useState({first_name:(null==r?void 0:r.first_name)||"",last_name:(null==r?void 0:r.last_name)||"",street:(null==r?void 0:r.street)||"",city:(null==r?void 0:r.city)||"",house_number:(null==r?void 0:r.house_number)||"",region:(null==r?void 0:r.region)||"",phone:(null==r?void 0:r.phone)||""}),[m,u]=e.useState(!1),[h,g]=e.useState({}),{toast:p}=l();return s.jsxs("div",{className:"my-24 px-5 xl:px-32",children:[s.jsxs(a,{href:"/address",className:"flex items-center gap-2","aria-label":"Back to Address",children:[s.jsx(n,{className:"text-2xl"}),s.jsx("h1",{className:"font-bold text-5xl font-oswald",children:"Joylashuv"})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-5",children:s.jsxs("div",{className:"col-span-4 my-5 px-10",children:[s.jsx("div",{className:"grid grid-cols-4 items-center pl-6",children:s.jsx("h2",{className:"col-span-3 text-2xl font-oswald",children:"Joylashuv qo'shish"})}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(!0),g({});try{await t.post("/address-create",d);p({title:"Muvaffaqiyatli",description:"✅ Manzil saqlandi!"}),c({first_name:"",last_name:"",street:"",city:"",house_number:"",region:"",phone:""}),window.location.href="/address"}catch(s){s.response?422===s.response.status?g(s.response.data.errors):401===s.response.status?p({title:"ERROR",description:"Avval login qiling!"}):p({title:"ERROR",description:"Xatolik: "+s.response.statusText}):s.request?p({title:"ERROR",description:"Serverdan javob kelmadi"}):p({title:"ERROR",description:"So‘rov yuborishda xatolik: "+s.message})}finally{u(!1)}},className:"grid p-5 gap-5",children:[s.jsx(i,{label:"Ismingiz:",name:"first_name",value:d.first_name,onChange:c,error:h.first_name}),s.jsx(i,{label:"Familiyangiz:",name:"last_name",value:d.last_name,onChange:c,error:h.last_name}),s.jsx(i,{label:"Ko'changiz:",name:"street",value:d.street,onChange:c,className:"sm:col-span-2",error:h.street}),s.jsx(i,{label:"Shahar:",name:"city",value:d.city,onChange:c,error:h.city}),s.jsx(i,{label:"Uy raqami / xonadon:",name:"house_number",value:d.house_number,onChange:c,error:h.house_number}),s.jsx(i,{label:"Viloyat / tuman:",name:"region",value:d.region,onChange:c,error:h.region}),s.jsx(o,{label:"Telefon raqamingiz:",value:d.phone,onChange:e=>{const s=(e=>{let s=e.replace(/\D/g,"");s.startsWith("998")?s=s.slice(3):s.startsWith("0")&&(s=s.slice(1)),s=s.substring(0,9);let a="+998 ";return s.length>0&&(a+="("+s.substring(0,2)),s.length>=2&&(a+=") "),s.length>=5?a+=s.substring(2,5)+"-":s.length>2&&(a+=s.substring(2)),s.length>=7?a+=s.substring(5,7)+"-":s.length>5&&(a+=s.substring(5)),s.length>=9?a+=s.substring(7,9):s.length>7&&(a+=s.substring(7)),a})(e.target.value);c(e=>({...e,phone:s}))},error:h.phone}),s.jsx("button",{type:"submit",disabled:m,className:"p-3 bg-black text-white w-[40%] sm:w-[35%] rounded-lg text-center",children:"Saqlash"})]})]})})]})},i=({label:e,name:a,value:t,onChange:n,className:l="",error:r})=>s.jsxs("div",{className:`bg-slate-100 p-3 rounded-lg space-y-2 ${l}`,children:[s.jsx("h3",{className:"font-oswald",children:e}),s.jsx("input",{type:"text",value:t,onChange:e=>n(s=>({...s,[a]:e.target.value})),placeholder:`${e}ni kiriting`,className:"bg-transparent w-full outline-none"}),r&&s.jsx("p",{className:"text-red-500 text-sm",children:r})]}),o=({label:e,value:a,onChange:t,error:n})=>s.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg space-y-2",children:[s.jsx("h3",{className:"font-oswald",children:e}),s.jsx("input",{type:"tel",value:a,onChange:t,placeholder:"+998 (__) ___-__-__",maxLength:19,className:"bg-transparent w-full outline-none"}),n&&s.jsx("p",{className:"text-red-500 text-sm",children:n})]});export{r as default};
