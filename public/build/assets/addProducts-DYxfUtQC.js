import{r as e,v as a,j as t}from"./app-0nnjcZrn.js";import{u as s}from"./use-toast-Dj50PcGS.js";const l=({categories:l})=>{const{toast:o}=s(),[r,n]=e.useState({photo1:null,photo2:null,photo3:null}),{data:i,setData:d,post:c,processing:u,errors:p,reset:m}=a({product_name:"",category_id:"",brend:"",photo1:null,photo2:null,photo3:null,variants:[{sizes:"",colors:"",price:""}]}),h=e=>{const{name:a,value:t}=e.target;d(a,t)},x=(e,a,t)=>{const s=[...i.variants];s[e][a]="sizes"===a||"colors"===a?t.split(",").map(e=>e.trim()):t,d("variants",s)};return t.jsxs("div",{className:"px-5 w-[1200px]",children:[t.jsx("h1",{className:"text-3xl font-bold mb-4 p-5",children:"Mahsulot qo'shish"}),t.jsxs("form",{onSubmit:e=>{e.preventDefault(),o({title:"Saqlanmoqda...",description:"Mahsulot qo'shilmoqda, iltimos kuting..."}),c("/admin-add-store",{forceFormData:!0,onSuccess:()=>{m(),n({photo1:null,photo2:null,photo3:null}),o({title:"Success",description:"Mahsulot muvaffaqiyatli qoâ€˜shildi"}),window.location.href="/admin-productStock"},onError:()=>{o({title:"Xatolik",description:"Ma'lumotlarni toâ€˜ldirishda xatolik bor."})}})},className:"space-y-6 max-w-4xl mx-auto",children:[t.jsx("div",{className:"flex gap-24 justify-center",children:[1,2,3].map(e=>t.jsx("div",{className:"flex flex-col items-center hover:scale-110 transition-all duration-700",children:t.jsxs("div",{className:"relative group w-24 h-24",children:[t.jsx("div",{className:"w-full h-full bg-slate-200 rounded-full flex items-center justify-center shadow-lg overflow-hidden",children:r[`photo${e}`]?t.jsx("img",{src:r[`photo${e}`],loading:"lazy",alt:`Preview ${e}`,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-5xl animate-pulse",children:"ðŸ“·"})}),t.jsxs("label",{className:"absolute inset-0 flex items-center justify-center cursor-pointer bg-black bg-opacity-0 hover:bg-opacity-30 rounded-full transition",children:[t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:a=>((e,a)=>{const t=e.target.files[0];if(t){d(a,t);const e=new FileReader;e.onloadend=()=>{n(t=>({...t,[a]:e.result}))},e.readAsDataURL(t)}})(a,`photo${e}`)}),t.jsx("span",{className:"text-xs text-white bg-black bg-opacity-50 px-2 py-1 rounded-full",children:"Upload"})]})]})},e))}),t.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[t.jsx("input",{name:"product_name",value:i.product_name,onChange:h,placeholder:"Product name",className:"w-full border p-5 rounded-lg outline-none"}),p.product_name&&t.jsx("div",{className:"text-red-600",children:p.product_name}),t.jsxs("select",{name:"category_id",value:i.category_id,onChange:h,className:"w-full border p-5 rounded-lg outline-none",children:[t.jsx("option",{value:"",children:"Kategoriya tanlang"}),l.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),p.category_id&&t.jsx("div",{className:"text-red-600",children:p.category_id}),t.jsx("input",{name:"brend",value:i.brend,onChange:h,placeholder:"Brend",className:"w-full border p-5 rounded-lg outline-none"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-2 mt-6",children:"Mahsulot variantlari"}),i.variants.map((e,a)=>t.jsxs("div",{className:"flex gap-4 mb-2 items-center",children:[t.jsx("input",{type:"text",placeholder:"Razmerlar (e.g. S, M, L)",value:Array.isArray(e.sizes)?e.sizes.join(", "):e.sizes,onChange:e=>x(a,"sizes",e.target.value),className:"border p-3 rounded w-1/3"}),t.jsx("input",{type:"text",placeholder:"Ranglar (e.g. red, blue)",value:Array.isArray(e.colors)?e.colors.join(", "):e.colors,onChange:e=>x(a,"colors",e.target.value),className:"border p-3 rounded w-1/3"}),t.jsx("input",{type:"number",placeholder:"Narx (e.g. 100000)",value:e.price,onChange:e=>x(a,"price",e.target.value),className:"border p-3 rounded w-1/3"}),t.jsx("button",{type:"button",onClick:()=>(e=>{const a=i.variants.filter((a,t)=>t!==e);d("variants",a)})(a),className:"text-red-600 text-xl font-bold",children:"âœ•"})]},a)),t.jsx("button",{type:"button",onClick:()=>{d("variants",[...i.variants,{sizes:"",colors:"",price:""}])},className:"mt-2 px-4 py-2 bg-green-600 text-white rounded",children:"âž• Variant qoâ€˜shish"})]}),t.jsx("button",{type:"submit",disabled:u,className:"bg-blue-600 text-white px-4 py-2 rounded mt-6",children:u?"Saqlanmoqda...":"ðŸ’¾ Saqlash"})]})]})};export{l as default};
