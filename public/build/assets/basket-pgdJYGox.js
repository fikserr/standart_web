import{j as e,Y as s,r as t,m as a,a as i}from"./app-0nnjcZrn.js";import{a as l}from"./index-CS3As8qO.js";import{u as r}from"./use-toast-Dj50PcGS.js";import"./iconBase-x5fZwo94.js";const n=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white px-4 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-8",children:"MAHSULOT SAVATI"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-24 h-24 mb-6",children:e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/2038/2038854.png",alt:"Bo'sh savat ikon",className:"w-full h-auto object-contain"})}),e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-2",children:"SAVATINGIZ HOZIRDA BO‘SH."}),e.jsx("p",{className:"max-w-md text-gray-600 mb-6",children:'Buyurtma berishdan oldin, iltimos, bir nechta mahsulotlarni savatga qo‘shing. "Katalog" sahifasida siz ko‘plab qiziqarli mahsulotlarni topishingiz mumkin.'}),e.jsx(s,{className:"bg-black text-white px-6 py-3 rounded hover:bg-gray-800 transition",href:"/","aria-label":"Go to Catalog Button",children:"KATALOGGA O‘TISH"})]})]}),o=({cartItems:s,address:o})=>{const[c,d]=t.useState([]),[m,x]=t.useState(null),[h,u]=t.useState(!1),{toast:p}=r();t.useEffect(()=>{o&&o.length>0&&x(o[0].id)},[o]),t.useEffect(()=>{d(s||[])},[s]);return c&&0!==c.length?e.jsxs("div",{className:"px-10 sm:px-10 md:px-20 lg:px-44 xl:px-64 py-10 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 mt-16",children:"Savat"}),e.jsx("div",{className:"grid lg:grid-cols-2 gap-3",children:c.map(s=>{var t,i,r;const n=s.color||"Noma'lum",o=s.size||"Noma'lum",c=s.price??0;return e.jsxs("div",{className:"border w-full rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:`/storage/${null==(t=s.product)?void 0:t.photo1}`,loading:"lazy",alt:null==(i=s.product)?void 0:i.product_name,className:"w-20 h-20 sm:w-32 sm:h-32 object-cover rounded"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"font-semibold text-xl",children:null==(r=s.product)?void 0:r.product_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Size: ",o]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Color: ",n]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Narxi: ",c.toLocaleString()," so‘m"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-4",children:[e.jsx("button",{className:"text-red-500 hover:text-red-700 text-xl",onClick:()=>{return e=s.id,void a.delete(`/cart/${e}`,{onSuccess:()=>{p({title:"Mahsulot o‘chirildi",description:"Sizning savatingizdan mahsulot o‘chirildi."}),d(s=>s.filter(s=>s.id!==e))},onError:()=>{p({title:"Xatolik",description:"Mahsulotni o‘chirishda xatolik yuz berdi."})}});var e},children:e.jsx(l,{})}),e.jsxs("p",{className:"flex gap-2",children:[s.quantity," ",e.jsx("span",{children:"dona"})]})]})]},s.id)})}),e.jsxs("div",{className:"bg-slate-200 p-3 rounded-lg mt-5",children:[e.jsxs("div",{className:"my-6",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Yetkazish manzili"}),e.jsx("select",{value:m,onChange:e=>x(e.target.value),className:"border px-4 py-2 rounded w-full outline-none bg-slate-100",children:null==o?void 0:o.map(s=>e.jsxs("option",{value:s.id,children:[s.region,", ",s.city,", ",s.street,","," ",s.house_number]},s.id))})]}),e.jsxs("div",{className:"mt-10 flex justify-between items-center border-t pt-6",children:[e.jsxs("h3",{className:"text-xl font-bold",children:["Umumiy: ",(b=c,b.reduce((e,s)=>e+(s.price??0)*s.quantity,0)).toLocaleString()," so‘m"]}),e.jsx("button",{className:"bg-black text-white px-6 py-3 rounded hover:bg-gray-800 transition disabled:opacity-50",onClick:()=>{m?(u(!0),i.post("/place-order",{address_id:Number(m)}).then(()=>{window.location.href="/order-success"}).catch(()=>{p({title:"Xatolik",description:"Buyurtma berishda xatolik yuz berdi."})}).finally(()=>{u(!1)})):p({title:"Manzil tanlanmadi",description:"Iltimos, yetkazish manzilini tanlang."})},disabled:h,children:h?"Yuborilmoqda...":"Buyurtma berish"})]})]})]}):e.jsx(n,{cartItems:c});var b};export{o as default};
