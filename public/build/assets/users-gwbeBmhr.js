import{r as e,j as s,Y as a,m as l}from"./app-0nnjcZrn.js";import{u as i}from"./use-toast-Dj50PcGS.js";import{a as t}from"./index-D7aLGra3.js";import{P as r,a as n,b as d}from"./pagination-B_Sx9wkE.js";import"./iconBase-x5fZwo94.js";const c=({users:c,search:m})=>{const[o,p]=e.useState(null),[x,h]=e.useState(m||""),{toast:u}=i();return s.jsxs("div",{className:"p-6 mx-5 min-h-screen w-[1200px]",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"User Lists"}),s.jsxs("div",{className:"mb-4 flex items-center border max-w-sm rounded-lg px-3",children:[s.jsx("input",{placeholder:"Ism yoki email bilan izlash...",value:x,onChange:e=>{const s=e.target.value;h(s),l.get("/admin-users",{search:s},{preserveState:!0})},className:"w-full border-none outline-none p-1"}),s.jsx(t,{style:{fontSize:"22px"}})]}),s.jsxs("div",{className:"",children:[s.jsxs("table",{className:"min-w-full text-sm text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100 text-gray-700",children:[s.jsx("th",{className:"px-4 py-2 font-medium",children:"Id"}),s.jsx("th",{className:"px-4 py-2 font-medium",children:"Name"}),s.jsx("th",{className:"px-4 py-2 font-medium",children:"Email"}),s.jsx("th",{className:"px-4 py-2 font-medium",children:"Created"}),s.jsx("th",{className:"px-4 py-2 font-medium",children:"Role"}),s.jsx("th",{className:"px-4 py-2 font-medium",children:"Action"})]})}),s.jsx("tbody",{children:c.data.map(e=>s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("td",{className:"px-4 py-3",children:e.id}),s.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:e.name}),s.jsx("td",{className:"px-4 py-3",children:e.email}),s.jsx("td",{className:"px-4 py-3",children:new Date(e.created_at).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"})}),s.jsx("td",{className:"px-4 py-3",children:e.is_admin?"Admin":"User"}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer group",children:[s.jsx("input",{type:"checkbox",checked:e.is_admin,onChange:()=>(async e=>{p(e.id);try{await l.put(`/admin/users/${e.id}`,{is_admin:!e.is_admin},{preserveScroll:!0,onSuccess:()=>{u({title:"Muvaffaqiyatli",description:e.is_admin?`${e.name} dan adminlik olib tashlandi`:`${e.name} adminga tayyorlandi`})},onFinish:()=>p(null)})}catch(s){console.error(s),p(null),u({title:"Xatolik yuz berdi",description:"Iltimos, keyinroq urinib koâ€˜ring"})}})(e),disabled:o===e.id,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-300 rounded-full peer peer-checked:bg-green-500 transition duration-300 ease-in-out group-hover:scale-105"}),s.jsx("div",{className:"absolute left-0.5 top-0.5 bg-white w-5 h-5 rounded-full transition-all duration-300 ease-in-out peer-checked:translate-x-5 peer-disabled:bg-gray-200 peer-disabled:cursor-not-allowed"})]})})]},e.id))})]}),c.total>0&&s.jsx(r,{className:"mt-5",children:s.jsx(n,{children:c.links.map((e,l)=>s.jsx(d,{children:e.url?s.jsx(a,{href:e.url,className:"px-3 py-1 rounded hover:bg-gray-200 "+(e.active?"bg-gray-300 font-bold":""),dangerouslySetInnerHTML:{__html:e.label}}):s.jsx("span",{className:"px-3 py-1 text-gray-400",dangerouslySetInnerHTML:{__html:e.label}})},l))})})]})]})};export{c as default};
