import{r as s,j as a,Y as e,a as l}from"./app-0nnjcZrn.js";import{I as i,a as t}from"./index-YOVMUvqp.js";import{u as o}from"./use-toast-Dj50PcGS.js";import"./iconBase-x5fZwo94.js";const r=({favorites:r=[],products:n=[]})=>{const{toast:d}=o(),c=Array.isArray(n)?n:(null==n?void 0:n.data)||[],[m,x]=s.useState(r),h=s.useMemo(()=>c.filter(s=>null==m?void 0:m.some(a=>a.id===s.id)),[c,m]),u=s.useMemo(()=>{const s={};return h.forEach(a=>{s[a.id]=!0}),s},[h]),[g,p]=s.useState(u);return r.length>0&&h.length>0?a.jsxs("div",{className:"w-10/12 mx-auto min-h-screen",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-8 mt-24",children:"SEVIMLILAR"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:h.map(s=>{var o;const r=g[s.id];return a.jsxs("div",{className:"relative rounded-lg",children:[a.jsx("img",{src:`/storage/${s.photo1}`,loading:"lazy",alt:s.product_name,className:"w-full h-48 object-cover rounded-t-lg"}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"",children:[a.jsx("h3",{className:"text-lg font-semibold",children:s.product_name}),a.jsx("p",{className:"text-black font-bold mt-1",children:(null==(o=s.variants)?void 0:o.length)>0?`${s.variants[0].price.toLocaleString()} so'm`:"Narx mavjud emas"})]}),a.jsx(e,{href:`/detail/${s.id}`,className:"hidden sm:block","aria-label":"View More Button",children:a.jsx("button",{className:"bg-black text-white w-full p-2 rounded-lg hover:bg-gray-800 transition xl:px-8",children:"Ko'proq"})})]}),a.jsx("button",{onClick:()=>(async s=>{try{if(g[s])await l.delete(`/favorites/${s}`),d({title:"Sevimlilardan o'chirildi",description:"✅ Mahsulot o'chirildi"}),x(a=>a.filter(a=>a.id!==s));else{await l.post("/favorites",{product_id:s}),d({title:"Sevimlilarga qo'shildi",description:"✅ Mahsulot qo'shildi"});const a=c.find(a=>a.id===s);x(s=>[...s,a])}p(a=>({...a,[s]:!a[s]}))}catch(a){console.error(a),alert(g[s]?"Sevimlilardan o'chirishda xatolik ❌":"Sevimlilarga qo'shishda xatolik ❌")}})(s.id),className:"absolute top-4 right-4 z-10","aria-label":"Star Button",children:r?a.jsx(i,{className:"text-2xl text-yellow-400"}):a.jsx(t,{className:"text-2xl text-black"})})]},s.id)})})]}):a.jsxs("div",{className:"mt-24 px-5 md:px-10 xl:px-20 min-h-screen",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"SEVIMLILAR"}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-screen mb-32 px-4 text-center",children:[a.jsx("div",{className:"w-24 h-24 mb-6",children:a.jsx("img",{src:"/build/assets/favorite-BKwhNz6N.png",loading:"lazy",alt:"Bo'sh sevimlilar ikonkasi",className:"w-full h-full object-contain"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-2",children:"SEVIMLI MAHSULOTLARINGIZ HALI YO‘Q."}),a.jsx("p",{className:"max-w-md text-gray-600 mb-6",children:'Yoqtirgan mahsulotlaringizni yo‘qotmaslik uchun ularni sevimlilarga qo‘shing. "Katalog" sahifasida siz ko‘plab qiziqarli mahsulotlarni topishingiz mumkin.'}),a.jsx("button",{className:"bg-black text-white px-6 py-3 rounded hover:bg-gray-800 transition",onClick:()=>window.location.href="/",children:"KATALOGGA O‘TISH"})]})]})};export{r as default};
